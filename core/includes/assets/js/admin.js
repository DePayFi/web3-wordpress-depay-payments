!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";const e="/Users/sebastian/Work/DePay/web3-wordpress-depay-payments/src/admin.js";function t(e){let t,l=e[0],s=1;for(;s<e.length;){const i=e[s],a=e[s+1];if(s+=2,("optionalAccess"===i||"optionalCall"===i)&&null==l)return;"access"===i||"optionalAccess"===i?(t=l,l=a(l)):"call"!==i&&"optionalCall"!==i||(l=a(((...e)=>l.call(t,...e))),t=void 0)}return l}!function(l,s,i){const a=window.React.useEffect,r=window.React.useState,n=["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTN","BWP","BYN","BZD","CAD","CDF","CHF","CLF","CLP","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRU","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XCD","XDR","XOF","XPF","YER","ZAR","ZMW","ZWL"],_=function(s){const[i,_]=r(!1),[m,o]=r(!1),[c,u]=r(),[f,N]=r(),[d,y]=r(),[p,b]=r(),[h,g]=r(),[E,D]=r(),[v,P]=r(),[w,B]=r(),[S,R]=r(),[C,k]=r(),[x,A]=r(),[T,F]=r([]),[L,M]=r([]),[K,W]=r(),[G,U]=r(),[I,O]=r(),[H,Y]=r(),[Z,X]=r(),[J,V]=r(),[$,z]=r(),[j,Q]=r(),[q,ee]=r(),te=(e,t,l,s)=>{let i=[...T];if(e&&0!==e.length)try{e="solana"===l?new SolanaWeb3js.PublicKey(e).toString():ethers.ethers.utils.getAddress(e),i[t].error=void 0}catch(e){i[t].error="This address is invalid!"}else i[t].error="Please enter a receiver address!";if(s){let e=L.slice();e[t]=!0,M(e)}i[t].receiver=e,F(i)};a((()=>{if(L.length){let e=setTimeout((()=>{M([])}),2e3);return()=>{clearInterval(e)}}}),[L]);return a((()=>{k(`button {\n  border-radius: ${d||2}px;\n  color: ${h||"#FFFFFF"};\n  background: ${p||"#32373c"};\n}`)}),[d,h,p]),a((()=>{wp.api.loadPromise.then((()=>{(new wp.api.models.Settings).fetch({cache:"no-cache"}).then((e=>{e.DePay_payments_accepted_payments&&F(e.DePay_payments_accepted_payments),R(e.DePay_payments_button_payment_label||"Pay"),k(e.DePay_payments_button_css||"button {\n  border-radius: 2px;\n  color: #FFFFFF;\n  background: #32373c;\n}"),b(e.DePay_payments_button_background_color||"#32373c"),g(e.DePay_payments_button_text_color||"#FFFFFF"),y(e.DePay_payments_button_border_radius||"2"),W(e.DePay_payments_widget_amount_type||"fix"),U(t([e,"access",e=>e.DePay_payments_widget_display_currency,"optionalAccess",e=>e.length])>2?e.DePay_payments_widget_display_currency:"local"),O(e.DePay_payments_widget_amount_free_start||1),Y(e.DePay_payments_widget_amount_free_min||1),X(e.DePay_payments_widget_amount_free_step||1),V(t([e,"access",e=>e.DePay_payments_widget_amount_currency,"optionalAccess",e=>e.length])>0?e.DePay_payments_widget_amount_currency:"USD"),z(e.DePay_payments_widget_fix_amount||100),o(!0)}))})).catch((()=>{}))}),[]),a((()=>{N(!(T&&T.length&&T.every((e=>e.receiver&&e.receiver.length>0&&void 0===e.error))))}),[T]),a((()=>{_(!1)}),[d,p,h,S,C,T,K,G,I,H,Z,J,$]),a((()=>{LocalCurrency.Currency.rate({from:J||"USD",to:"USD"}).then((e=>{Q(($/e).toFixed(2))})),LocalCurrency.Currency.rate({from:J||"USD",to:"local"===G?void 0:G}).then((e=>{ee(new LocalCurrency.Currency({amount:$/e,code:"local"===G?void 0:G}).toString())}))}),[G,I,K,$,J]),m?l.createElement("div",{className:"wrap",__self:this,__source:{fileName:e,lineNumber:184}},l.createElement("h1",{className:"wp-heading-inline",__self:this,__source:{fileName:e,lineNumber:186}},"DePay for Wordpress"),l.createElement("p",{__self:this,__source:{fileName:e,lineNumber:188}},"To view received payments, please open the ",l.createElement("a",{href:"https://app.depay.com/payments",target:"_blank",__self:this,__source:{fileName:e,lineNumber:188}},"DePay App"),"."),l.createElement("table",{className:"form-table",role:"presentation",__self:this,__source:{fileName:e,lineNumber:190}},l.createElement("tbody",{__self:this,__source:{fileName:e,lineNumber:191}},l.createElement("tr",{__self:this,__source:{fileName:e,lineNumber:192}},l.createElement("th",{scope:"row",__self:this,__source:{fileName:e,lineNumber:193}},"Accepted"),l.createElement("td",{__self:this,__source:{fileName:e,lineNumber:196}},l.createElement("div",{style:{paddingBottom:"1rem"},__self:this,__source:{fileName:e,lineNumber:197}},"Select the tokens that you want to receive:"),T&&T.map(((t,s)=>l.createElement("table",{key:`${s}-${t.blockchain}-${t.symbol}-${L[s]}`,className:"wp-list-table widefat fixed striped table-view-list page",style:{maxWidth:"600px",marginBottom:"0.4rem"},__self:this,__source:{fileName:e,lineNumber:203}},l.createElement("tr",{__self:this,__source:{fileName:e,lineNumber:204}},l.createElement("td",{style:{padding:"1rem 1rem 0.4rem 1rem",display:"flex"},__self:this,__source:{fileName:e,lineNumber:205}},l.createElement("div",{__self:this,__source:{fileName:e,lineNumber:206}},l.createElement("div",{style:{position:"relative",display:"block"},__self:this,__source:{fileName:e,lineNumber:207}},l.createElement("img",{src:t.logo,style:{background:"white",borderRadius:"99px",height:"3rem",width:"3rem"},__self:this,__source:{fileName:e,lineNumber:208}}),l.createElement("img",{src:Web3Blockchains[t.blockchain].logo,style:{position:"absolute",bottom:"2px",right:"0px",width:"20px",height:"20px",border:"1px solid white",borderRadius:"4px",backgroundColor:Web3Blockchains[t.blockchain].logoBackgroundColor},__self:this,__source:{fileName:e,lineNumber:209}}))),l.createElement("div",{style:{paddingLeft:"1rem",paddingBottom:"0.3rem",flex:1},__self:this,__source:{fileName:e,lineNumber:212}},l.createElement("div",{style:{display:"flex",justifyontent:"space-between",fontSize:"1rem"},__self:this,__source:{fileName:e,lineNumber:213}},l.createElement("div",{__self:this,__source:{fileName:e,lineNumber:214}},l.createElement("strong",{__self:this,__source:{fileName:e,lineNumber:215}},t.symbol)," (",t.name,") on ",Web3Blockchains[t.blockchain].label),l.createElement("div",{className:"row-actions visible",style:{marginLeft:"auto"},__self:this,__source:{fileName:e,lineNumber:217}},l.createElement("span",{className:"delete",__self:this,__source:{fileName:e,lineNumber:218}},l.createElement("a",{href:"#",onClick:()=>(e=>{let t=T.slice();t.splice(e,1),F(t)})(s),__self:this,__source:{fileName:e,lineNumber:219}},"Remove")))),l.createElement("div",{__self:this,__source:{fileName:e,lineNumber:223}},l.createElement("a",{href:Web3Blockchains[t.blockchain].explorerUrlFor({token:t.address}),target:"_blank",__self:this,__source:{fileName:e,lineNumber:224}},((e,t=4)=>{if(void 0===e)return e;let l="";return l+=e.slice(0,e.match("0x")?t+2:t),l+="...",l+=e.slice(e.length-t,e.length),l})(t.address))),l.createElement("div",{style:{paddingTop:".5rem"},__self:this,__source:{fileName:e,lineNumber:226}},l.createElement("label",{style:{marginBottom:0},__self:this,__source:{fileName:e,lineNumber:227}},l.createElement("span",{className:"",style:{opacity:.7,paddingBottom:"1px",display:"block"},__self:this,__source:{fileName:e,lineNumber:228}},"Receiver"),l.createElement("div",{className:"components-base-control",__self:this,__source:{fileName:e,lineNumber:229}},l.createElement("input",{required:"required",style:{width:"100%"},id:"depay-woocommerce-payment-receiver-address",type:"text",value:t.receiver,onChange:e=>te(e.target.value,s,t.blockchain),__self:this,__source:{fileName:e,lineNumber:230}})),t.error&&l.createElement("div",{className:"notice inline notice-warning notice-alt",style:{marginBottom:0},__self:this,__source:{fileName:e,lineNumber:240}},t.error))),l.createElement("div",{className:"row-actions visible",__self:this,__source:{fileName:e,lineNumber:246}},l.createElement("div",{__self:this,__source:{fileName:e,lineNumber:247}},!L[s]&&l.createElement("button",{style:{marginTop:"0.5rem"},type:"button",className:"button button-secondary",onClick:()=>(async(e,t)=>{let{account:l,accounts:s,wallet:i}=await window.DePayWidgets.Connect();te(l,e,t,!0)})(s,t.blockchain),__self:this,__source:{fileName:e,lineNumber:249}},"Connect Wallet"),L[s]&&l.createElement("button",{style:{marginTop:"0.5rem"},type:"button",className:"button button-primary",__self:this,__source:{fileName:e,lineNumber:252}},"âœ” wallet connected"))))))))),l.createElement("div",{style:{paddingTop:"0.2rem"},__self:this,__source:{fileName:e,lineNumber:263}},l.createElement("button",{onClick:async()=>{let e=await DePayWidgets.Select({what:"token"});T instanceof Array&&T.find((t=>t.blockchain==e.blockchain&&t.address==e.address))||(e.error="Please enter a receiver address!",F(T instanceof Array?T.concat([e]):[e]))},style:{fontSize:"1.1rem",padding:"0 1rem",marginTop:"0.5rem"},type:"button",className:"button button-secondary",__self:this,__source:{fileName:e,lineNumber:264}},"Add Token")),l.createElement("div",{style:{paddingTop:"1.6rem",paddingBottom:"1.5rem"},__self:this,__source:{fileName:e,lineNumber:266}},l.createElement("p",{className:"description",__self:this,__source:{fileName:e,lineNumber:267}},"Each incoming payment will be converted on-the-fly into your selected tokens on the selected blockchains."),l.createElement("p",{className:"description",__self:this,__source:{fileName:e,lineNumber:270}},"Users will be able to use any convertible token as means of payment."),l.createElement("p",{className:"description",__self:this,__source:{fileName:e,lineNumber:273}},l.createElement("strong",{__self:this,__source:{fileName:e,lineNumber:274}},"Payments are sent directly into your wallet."))))),l.createElement("tr",{__self:this,__source:{fileName:e,lineNumber:279}},l.createElement("th",{scope:"row",__self:this,__source:{fileName:e,lineNumber:280}},"Button"),l.createElement("td",{__self:this,__source:{fileName:e,lineNumber:283}},l.createElement("div",{__self:this,__source:{fileName:e,lineNumber:285}},l.createElement("p",{className:"description",style:{paddingBottom:"0.8rem"},__self:this,__source:{fileName:e,lineNumber:286}},l.createElement("strong",{__self:this,__source:{fileName:e,lineNumber:286}},"Style")),l.createElement("div",{style:{marginBottom:"0.8rem"},__self:this,__source:{fileName:e,lineNumber:287}},l.createElement("label",{style:{display:"flex",alignItems:"center"},__self:this,__source:{fileName:e,lineNumber:287}},l.createElement("input",{style:{marginRight:"0.6rem"},type:"color",value:p,onChange:e=>{b(e.target.value)},__self:this,__source:{fileName:e,lineNumber:287}}),"Background")),l.createElement("div",{style:{marginBottom:"0.8rem"},__self:this,__source:{fileName:e,lineNumber:288}},l.createElement("label",{style:{display:"flex",alignItems:"center"},__self:this,__source:{fileName:e,lineNumber:288}},l.createElement("input",{style:{marginRight:"0.6rem"},type:"color",value:h,onChange:e=>{g(e.target.value)},__self:this,__source:{fileName:e,lineNumber:288}}),"Text")),l.createElement("div",{style:{marginBottom:"0.8rem"},__self:this,__source:{fileName:e,lineNumber:289}},l.createElement("label",{style:{display:"flex",alignItems:"center"},__self:this,__source:{fileName:e,lineNumber:289}},l.createElement("input",{style:{marginRight:"0.6rem"},type:"range",value:d,min:"0",max:"36",onChange:e=>{y(e.target.value)},__self:this,__source:{fileName:e,lineNumber:289}}),"Border"))),l.createElement("div",{__self:this,__source:{fileName:e,lineNumber:292}},l.createElement("div",{style:{paddingTop:"0.8rem"},__self:this,__source:{fileName:e,lineNumber:293}},l.createElement("span",{className:"",style:{opacity:.7,paddingBottom:"0.8rem",display:"block"},__self:this,__source:{fileName:e,lineNumber:294}},l.createElement("strong",{__self:this,__source:{fileName:e,lineNumber:294}},"Preview")),l.createElement("div",{style:{display:"inline-block"},__self:this,__source:{fileName:e,lineNumber:295}},l.createElement(DePayButtons.DePayButton,{css:C,label:S,widget:"Payment",configuration:{accept:T},__self:this,__source:{fileName:e,lineNumber:296}}))),l.createElement("div",{style:{paddingTop:"1.4rem"},__self:this,__source:{fileName:e,lineNumber:304}},l.createElement("p",{className:"description",__self:this,__source:{fileName:e,lineNumber:305}},l.createElement("strong",{__self:this,__source:{fileName:e,lineNumber:305}},"Usage"))),l.createElement("div",{style:{marginBottom:"0.8rem"},__self:this,__source:{fileName:e,lineNumber:307}},l.createElement("p",{className:"description",style:{marginBottom:"0.8rem"},__self:this,__source:{fileName:e,lineNumber:308}},"Search for the ",l.createElement("strong",{__self:this,__source:{fileName:e,lineNumber:309}},'"DePay"')," block in the editor and drop the button into layouts, pages and posts.",l.createElement("br",{__self:this,__source:{fileName:e,lineNumber:310}}),"You can individually customize each block for more precise configuration.")),l.createElement("img",{style:{width:"100%",maxWidth:"600px",marginBottom:"2rem"},src:"/wp-content/plugins/depay-payments/core/includes/assets/img/button.gif",__self:this,__source:{fileName:e,lineNumber:314}})))),l.createElement("tr",{__self:this,__source:{fileName:e,lineNumber:319}},l.createElement("th",{scope:"row",__self:this,__source:{fileName:e,lineNumber:320}},"Widget"),l.createElement("td",{__self:this,__source:{fileName:e,lineNumber:323}},l.createElement("div",{style:{paddingTop:"0.4rem"},__self:this,__source:{fileName:e,lineNumber:325}},l.createElement("p",{className:"description",style:{paddingBottom:"0.8rem"},__self:this,__source:{fileName:e,lineNumber:326}},l.createElement("strong",{__self:this,__source:{fileName:e,lineNumber:326}},"Amount Currency")),l.createElement("div",{style:{marginBottom:"0.8rem"},__self:this,__source:{fileName:e,lineNumber:327}},l.createElement("label",{style:{display:"flex",alignItems:"center"},__self:this,__source:{fileName:e,lineNumber:328}},l.createElement("select",{style:{marginRight:"0.8rem"},value:J,onChange:e=>V(e.target.value),__self:this,__source:{fileName:e,lineNumber:329}},n.map((t=>l.createElement("option",{value:t,__self:this,__source:{fileName:e,lineNumber:331}},t)))),"Currency used to set prices/amounts"))),l.createElement("div",{style:{paddingTop:"0.4rem"},__self:this,__source:{fileName:e,lineNumber:340}},l.createElement("p",{className:"description",style:{paddingBottom:"0.8rem"},__self:this,__source:{fileName:e,lineNumber:341}},l.createElement("strong",{__self:this,__source:{fileName:e,lineNumber:341}},"Display Currency")),l.createElement("div",{style:{marginBottom:"0.8rem"},__self:this,__source:{fileName:e,lineNumber:342}},l.createElement("label",{style:{display:"flex",alignItems:"center"},__self:this,__source:{fileName:e,lineNumber:343}},l.createElement("select",{style:{marginRight:"0.8rem"},value:G,onChange:e=>U(e.target.value),__self:this,__source:{fileName:e,lineNumber:344}},l.createElement("option",{value:"local",__self:this,__source:{fileName:e,lineNumber:345}},"User's local currency"),n.map((t=>l.createElement("option",{value:t,__self:this,__source:{fileName:e,lineNumber:347}},t)))),"Currency displayed to users after conversion"))))),l.createElement("tr",{__self:this,__source:{fileName:e,lineNumber:358}},l.createElement("th",{__self:this,__source:{fileName:e,lineNumber:359}},"Â "),l.createElement("td",{__self:this,__source:{fileName:e,lineNumber:360}},l.createElement("div",{__self:this,__source:{fileName:e,lineNumber:361}},l.createElement("div",{__self:this,__source:{fileName:e,lineNumber:362}},l.createElement("div",{__self:this,__source:{fileName:e,lineNumber:363}},i&&l.createElement("button",{style:{fontSize:"1.1rem",padding:"0 1rem",marginTop:"0.5rem"},type:"button",className:"button button-secondary",onClick:()=>{},__self:this,__source:{fileName:e,lineNumber:365}},"âœ“ Settings Saved"),f&&l.createElement("div",{className:"notice inline notice-warning notice-alt",style:{marginBottom:0,maxWidth:"300px"},__self:this,__source:{fileName:e,lineNumber:373}},t([T,"optionalAccess",e=>e.length])>0&&l.createElement("span",{__self:this,__source:{fileName:e,lineNumber:374}},"Please fix all errors before saving!"),0==t([T,"optionalAccess",e=>e.length])&&l.createElement("span",{__self:this,__source:{fileName:e,lineNumber:375}},"Please add at least one token!")),!i&&l.createElement("button",{style:{fontSize:"1.1rem",padding:"0 1rem",marginTop:"0.5rem"},type:"button",className:"button button-primary",onClick:()=>(u(!0),void new window.wp.api.models.Settings({DePay_payments_accepted_payments:T,DePay_payments_button_css:C,DePay_payments_button_background_color:p,DePay_payments_button_text_color:h,DePay_payments_button_border_radius:d,DePay_payments_widget_color_primary:E,DePay_payments_widget_button_border_radius:v,DePay_payments_widget_color_button_text:w,DePay_payments_widget_color_icons:void 0,DePay_payments_widget_color_text:void 0,DePay_payments_widget_css:x,DePay_payments_widget_payment_amount_type:K,DePay_payments_widget_display_currency:G,DePay_payments_widget_amount_currency:J}).save().then((e=>{u(!1),_(!0)}))),disabled:c||f,__self:this,__source:{fileName:e,lineNumber:379}},"Save Settings"))))))))):null};document.addEventListener("DOMContentLoaded",(function(t){s.render(l.createElement(_,{__self:this,__source:{fileName:e,lineNumber:400}}),document.getElementById("depay-payments-admin"))}))}(window.React,window.ReactDOM,window.wp.components)}));
